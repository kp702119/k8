# Harbor Helm Values Configuration
# Simplified deployment for development/testing

# Expose Harbor via NodePort
expose:
  type: nodePort
  tls:
    enabled: false  # Disable TLS for simplicity
  nodePort:
    name: harbor
    ports:
      http:
        nodePort: 30280

# External URL
externalURL: http://10.10.80.77:30280

# Harbor admin password
harborAdminPassword: "Harbor12345"

# Persistence configuration - Disabled for quick deployment
persistence:
  enabled: false

# Disable Notary (image signing) for simplicity
notary:
  enabled: false

# Trivy scanner configuration
trivy:
  enabled: true
  resources:
    requests:
      cpu: 200m
      memory: 512Mi
    limits:
      cpu: 1000m
      memory: 1Gi

# Core service configuration
core:
  replicas: 1
  resources:
    requests:
      memory: 256Mi
      cpu: 250m
    limits:
      memory: 1Gi
      cpu: 1000m

# JobService configuration
jobservice:
  replicas: 1
  resources:
    requests:
      memory: 256Mi
      cpu: 250m
    limits:
      memory: 1Gi
      cpu: 1000m

# Registry configuration
registry:
  replicas: 1
  resources:
    requests:
      memory: 256Mi
      cpu: 250m
    limits:
      memory: 1Gi
      cpu: 1000m

# Portal (UI) configuration
portal:
  replicas: 1
  resources:
    requests:
      memory: 128Mi
      cpu: 100m
    limits:
      memory: 256Mi
      cpu: 500m

# Database configuration (internal PostgreSQL)
database:
  type: internal
  internal:
    resources:
      requests:
        memory: 256Mi
        cpu: 250m
      limits:
        memory: 1Gi
        cpu: 1000m

# Redis configuration (internal)
redis:
  type: internal
  internal:
    resources:
      requests:
        memory: 128Mi
        cpu: 100m
      limits:
        memory: 256Mi
        cpu: 500m

# Nginx configuration
nginx:
  replicas: 1
  resources:
    requests:
      memory: 128Mi
      cpu: 100m
    limits:
      memory: 256Mi
      cpu: 500m

# Node selector - deploy on worker nodes
core:
  nodeSelector:
    node-role.kubernetes.io/worker: "true"

jobservice:
  nodeSelector:
    node-role.kubernetes.io/worker: "true"

registry:
  nodeSelector:
    node-role.kubernetes.io/worker: "true"

portal:
  nodeSelector:
    node-role.kubernetes.io/worker: "true"

database:
  internal:
    nodeSelector:
      node-role.kubernetes.io/worker: "true"

redis:
  internal:
    nodeSelector:
      node-role.kubernetes.io/worker: "true"

trivy:
  nodeSelector:
    node-role.kubernetes.io/worker: "true"

nginx:
  nodeSelector:
    node-role.kubernetes.io/worker: "true"
